package com.symphony.ds;

import com.symphony.bdk.core.SymphonyBdk;
import com.symphony.ds.malware.MalwareExtension;
import com.symphony.ds.malware.MalwareService;
import com.symphony.ds.malware.State;
import static com.symphony.bdk.core.config.BdkConfigLoader.loadFromClasspath;

public class BotApplication {
  public static void main(String[] args) throws Exception {
    final SymphonyBdk bdk = new SymphonyBdk(loadFromClasspath("/config.yaml"));

    bdk.extensions().register(MalwareExtension.class);
    MalwareService service = bdk.extensions().service(MalwareExtension.class);

    String fileId = "external_12644383719431%2FqLZfpP1a5ozd0lgKmip9nA%3D%3D";

    State updateState = new State();
    updateState.setStatus("OK");
    service.updateState(fileId, updateState);

    State state = service.getState(fileId);
    System.out.println(state.getStatus());
  }
}
